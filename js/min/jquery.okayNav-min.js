!function($,n,i,e){function t(e,t){self=this,this.options=$.extend({},o,t),_options=this.options,$navigation=$(e),$document=$(i),$window=$(n),""==this.options.parent?this.options.parent=$navigation.parent():"",_nav_visible=!1,_nav_full_width=0,_parent_full_width=0,radCoef=180/Math.PI,_sTouch={x:0,y:0},_cTouch={x:0,y:0},_sTime=0,_nav_position=0,_percent_open=0,_nav_moving=!1,self.init()}var a="okayNav",o={parent:"",toggle_icon_class:"okayNav__menu-toggle",toggle_icon_content:"<span /><span /><span />",align_right:!0,swipe_enabled:!0,threshold:50,resize_delay:10,beforeOpen:function(){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){},itemHidden:function(){},itemDisplayed:function(){}};t.prototype={init:function(){$("body").addClass("okayNav-loaded"),$navigation.addClass("okayNav loaded").children("ul").addClass("okayNav__nav--visible"),self.options.align_right?$navigation.append('<ul class="okayNav__nav--invisible transition-enabled nav-right" />').append('<a href="#" class="'+_options.toggle_icon_class+' okay-invisible">'+_options.toggle_icon_content+"</a>"):$navigation.prepend('<ul class="okayNav__nav--invisible transition-enabled nav-left" />').prepend('<a href="#" class="'+_options.toggle_icon_class+' okay-invisible">'+_options.toggle_icon_content+"</a>"),$nav_visible=$navigation.children(".okayNav__nav--visible"),$nav_invisible=$navigation.children(".okayNav__nav--invisible"),$nav_toggle_icon=$navigation.children("."+_options.toggle_icon_class),_toggle_icon_width=$nav_toggle_icon.outerWidth(!0),_nav_default_width=self.getChildrenWidth($navigation),_parent_full_width=$(_options.parent).outerWidth(!0),_last_visible_child_width=0,self.initEvents(),1==_options.swipe_enabled&&self.initSwipeEvents()},initEvents:function(){$document.on("click.okayNav",function(n){var i=$(n.target);_nav_visible===!0&&0==i.closest(".okayNav").length&&self.closeInvisibleNav(),i.hasClass(_options.toggle_icon_class)&&(n.preventDefault(),self.toggleInvisibleNav())});var n=self._debounce(function(){self.recalcNav()},_options.recalc_delay);$window.on("load.okayNav resize.okayNav",n)},initSwipeEvents:function(){$document.on("touchstart.okayNav",function(n){if($nav_invisible.removeClass("transition-enabled"),1==n.originalEvent.touches.length){var i=n.originalEvent.touches[0];(i.pageX<25&&0==self.options.align_right||i.pageX>$(_options.parent).outerWidth(!0)-25&&1==self.options.align_right||_nav_visible===!0)&&(_sTouch.x=_cTouch.x=i.pageX,_sTouch.y=_cTouch.y=i.pageY,_sTime=Date.now())}}).on("touchmove.okayNav",function(n){var i=n.originalEvent.touches[0];self._triggerMove(i.pageX,i.pageY),_nav_moving=!0}).on("touchend.okayNav",function(n){_sTouch={x:0,y:0},_cTouch={x:0,y:0},_sTime=0,_percent_open>100-self.options.threshold?(_nav_position=0,self.closeInvisibleNav()):1==_nav_moving&&(_nav_position=$nav_invisible.width(),self.openInvisibleNav()),_nav_moving=!1,$nav_invisible.addClass("transition-enabled")})},_getDirection:function(n){return self.options.align_right?n>0?-1:1:0>n?-1:1},_triggerMove:function(n,i){_cTouch.x=n,_cTouch.y=i;var e=Date.now(),t=_cTouch.x-_sTouch.x,a=_cTouch.y-_sTouch.y,o=a*a,s=Math.sqrt(t*t+o),l=Math.sqrt(o),_=Math.asin(Math.sin(l/s))*radCoef,v=s/(e-_sTime);if(_sTouch.x=n,_sTouch.y=i,20>_){var c=self._getDirection(t),r=_nav_position+c*s,d=$nav_invisible.width(),p=0;0>r?p=-r:r>d&&(p=d-r);var g=d-(_nav_position+c*s+p),u=g/d*100;_nav_position+=c*s+p,_percent_open=u,$nav_invisible.css("transform","translateX("+(self.options.align_right?1:-1)*u+"%)")}},getParent:function(){return _options.parent},getVisibleNav:function(){return $nav_visible},getInvisibleNav:function(){return $nav_invisible},getNavToggleIcon:function(){return $nav_toggle_icon},_debounce:function(n,i,e){var t;return function(){var a=this,o=arguments,s=function(){t=null,e||n.apply(a,o)},l=e&&!t;clearTimeout(t),t=setTimeout(s,i),l&&n.apply(a,o)}},openInvisibleNav:function(){_options.enable_swipe?"":_options.beforeOpen.call(),$nav_toggle_icon.addClass("icon--active"),$nav_invisible.addClass("nav-open"),_nav_visible=!0,$nav_invisible.css({"-webkit-transform":"translateX(0%)",transform:"translateX(0%)"}),_options.afterOpen.call()},closeInvisibleNav:function(){_options.enable_swipe?"":_options.beforeClose.call(),$nav_toggle_icon.removeClass("icon--active"),$nav_invisible.removeClass("nav-open"),$nav_invisible.css(self.options.align_right?{"-webkit-transform":"translateX(100%)",transform:"translateX(100%)"}:{"-webkit-transform":"translateX(-100%)",transform:"translateX(-100%)"}),_nav_visible=!1,_options.afterClose.call()},toggleInvisibleNav:function(){_nav_visible?self.closeInvisibleNav():self.openInvisibleNav()},getChildrenWidth:function(n){for(var i=0,e=$(n).children(),t=0;t<e.length;t++)i+=$(e[t]).outerWidth(!0);return i},getVisibleItemCount:function(){return $("li",$nav_visible).length},getHiddenItemCount:function(){return $("li",$nav_invisible).length},recalcNav:function(){var n=$(_options.parent).outerWidth(!0),i=self.getChildrenWidth(_options.parent),e=$navigation.outerWidth(!0),t=self.getVisibleItemCount(),a=$nav_visible.outerWidth(!0)+_toggle_icon_width,o=i+_last_visible_child_width+_toggle_icon_width,s=i-e+_nav_default_width;return n>s?(self._expandAllItems(),void $nav_toggle_icon.addClass("okay-invisible")):(t>0&&a>=e&&o>=n&&self._collapseNavItem(),n>o+_toggle_icon_width+15&&self._expandNavItem(),void(0==self.getHiddenItemCount()?$nav_toggle_icon.addClass("okay-invisible"):$nav_toggle_icon.removeClass("okay-invisible")))},_collapseNavItem:function(){var n=$("li:last-child",$nav_visible);_last_visible_child_width=n.outerWidth(!0),$document.trigger("okayNav:collapseItem",n),n.detach().prependTo($nav_invisible),_options.itemHidden.call(),self.recalcNav()},_expandNavItem:function(){var n=$("li:first-child",$nav_invisible);$document.trigger("okayNav:expandItem",n),n.detach().appendTo($nav_visible),_options.itemDisplayed.call()},_expandAllItems:function(){$("li",$nav_invisible).detach().appendTo($nav_visible),_options.itemDisplayed.call()},_collapseAllItems:function(){$("li",$nav_visible).detach().appendTo($nav_invisible),_options.itemHidden.call()},destroy:function(){$("li",$nav_invisible).appendTo($nav_visible),$nav_invisible.remove(),$nav_visible.removeClass("okayNav__nav--visible"),$nav_toggle_icon.remove(),$document.unbind(".okayNav"),$window.unbind(".okayNav")}},$.fn[a]=function(n){var i=arguments;if(n===e||"object"==typeof n)return this.each(function(){$.data(this,"plugin_"+a)||$.data(this,"plugin_"+a,new t(this,n))});if("string"==typeof n&&"_"!==n[0]&&"init"!==n){var o;return this.each(function(){var e=$.data(this,"plugin_"+a);e instanceof t&&"function"==typeof e[n]&&(o=e[n].apply(e,Array.prototype.slice.call(i,1))),"destroy"===n&&$.data(this,"plugin_"+a,null)}),o!==e?o:this}}}(jQuery,window,document);